{% extends 'layouts/base.njk' %}

{% block script %}
  {{ super() }}
  <script type="module">
    import "/assets/js/data-table.js"
  </script>
{% endblock %}

{% block content %}
  <main id="main">
    <header class="flow u-truncate o-section--angled">
      <h1 class="u-revertMargin--start">{{ title }}</h1>
      <p>I keep track of my listening habits in ListenBrainz because I'm a <strong>nerd</strong>. All that data is public on <a
          href="https://listenbrainz.org/user/actionhamilton/">my ListenBrainz profile</a>, but I've chosen to display a few specific
        metrics here. Cool, right?</p>
    </header>
    <div class="wrapper constrain--less">
      <div class="listeningHistory">
        <data-table
          caption="Last 30 Plays"
          headers="Number Artist Track Release"
          data='{{ mostRecentListens | dump }}'></data-table>
        <data-table
          caption="Top Artists This Month"
          headers="Number Artist Listens"
          data='{{ topArtistsThisMonth | dump }}'></data-table>
      </div>
    </div>
  </main>
{% endblock %}

{% block style %}
  {{ super() }}
  <style>
    .listeningHistory {
      align-items: start;
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-m);
      justify-content: space-between;
      margin-block: var(--space-xl-2xl);
    }
  </style>
{% endblock %}
