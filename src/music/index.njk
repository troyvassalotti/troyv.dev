{% extends 'layouts/base.njk' %}

{% block content %}
  <main id="main">
    <div class="wrapper constrain--less central">
      <div class="o-left flow u-truncate">
        <header class="flow header">
          <h1 class="title u-text--caps u-text--base">{{ title }}</h1>
          <h2 class="callout u-line-height--less">Guitarist, drummer, singer-songwriter.</h2>
          <p>Check out my musical projects - <em>Front Royal</em> and <em>troy.</em> - below.</p>
        </header>
        <section class="o-bands">
          <article class="c-band c-band--frontRoyal">
            <div class="c-band__logo">
              <a class="u-linked-image" href="https://www.frontroyalband.com/">
                <picture>
                  <source srcset="{{ metadata.cloudinary }}/c_scale,f_auto,q_auto:eco,w_400/v1646349103/blog/front-royal-logo-white_400x240_fharjl.webp" media="(prefers-color-scheme: light)">
                  <img
                    src="{{ metadata.cloudinary }}/c_scale,f_auto,q_auto:eco,w_400/v1646349103/blog/FR_full_res_drh6ez.webp"
                    alt="Front Royal"
                    width="400"
                    height="240"
                    loading="lazy"
                    decoding="async" />
                </picture>
              </a>
            </div>
            <div class="c-band__links">
              {% for social in frontRoyalSocial %}
                <a class="u-linked-image" href="{{ social.href }}">
                  {% include "partials/" + social.img %}
                </a>
              {% endfor %}
            </div>
          </article>
          <article class="c-band c-band--troy">
            <div class="c-band__logo">
              <a class="u-linked-image" href="https://hyperfollow.com/troyalllowercase">
                <img
                  src="{{ metadata.cloudinary }}/c_scale,f_auto,q_auto:eco,w_300/v1646349104/blog/me-on-set_gkrhf7.webp"
                  alt="troy"
                  width="300"
                  height="293"
                  loading="lazy"
                  decoding="async" />
              </a>
            </div>
            <div class="c-band__links">
              {% for social in troySocial %}
                <a href="{{ social.href }}">
                  {% include "partials/" + social.img %}
                </a>
              {% endfor %}
            </div>
          </article>
        </section>
      </div>
      <div class="o-right">
        <section class="plvylist">
          <header>
            <h2 class="u-text--base u-text--caps title">You can stream here</h2>
            <p class="u-text--smaller u-text--italic">Psst... <a href="https://www.npmjs.com/package/plvylist">I made this player</a>.</p>
          </header>
          <plvylist-player tracks="/assets/js/alone-in-a-crowded-room.json" starting-volume="0.75">
          </plvylist-player>
        </section>
      </div>
    </div>
  </main>
{% endblock %}

{#TODO#}
{#Talk about Listenbrainz and display that API data#}
{#Use 11ty fetch to cache results#}

{% block style %}
  {{ super() }}
  <style>
    .central {
      display: grid;
      gap: var(--space-l-xl);
      margin-block-start: var(--space-2xl);
    }

    @media (min-width: 70.25rem) {
      .central {
        grid-template-columns: 1fr 1fr;
      }
    }

    .o-left {
      --flow-space: var(--space-l-xl);
    }

    .o-left .header {
      --flow-space: var(--space-s);
    }

    .callout {
      font-size: var(--step-6);
    }

    .o-bands {
      align-items: start;
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-l);
      justify-content: space-evenly;
    }

    .c-band {
      align-items: center;
      display: flex;
      flex-direction: column;
    }

    .c-band__links {
      display: flex;
      gap: var(--space-2xs);
    }

    .c-band--troy .c-band__logo img {
      border-radius: 50%;
      object-fit: cover;
      inline-size: auto;
      max-block-size: 200px;
    }

    .c-band__links svg {
      max-inline-size: 48px;
    }

    .plvylist {
      inset-block-start: 0;
      position: sticky;
    }

    plvylist-player {
      display: block;
      margin-block: var(--space-s-m);
    }
  </style>
{% endblock %}
