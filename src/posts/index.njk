{% extends 'layouts/page.njk' %}

<script type="module">
    {% set js %}
    // This is for the handdrawn annotations from Rough Notation
    import { annotate } from "https://cdn.skypack.dev/rough-notation"

    const pageTitle = document.querySelector("#page-title")
    const postsAnnotation = annotate(pageTitle, {
        type: "circle",
        color: "var(--postsColor)",
        padding: 15
    })

    postsAnnotation.show()
    {% endset %}
</script>

{% block main %}
    <section class="all-posts full">
        <div class="wrapper">
            <div class="grid posts-container">
                {% for post in collections.post | reverse %}
                    <article class="post-listing">
                        <h2><a href="{{ post.url }}">{{ post.data.title }}</a></h2>
                        <p>{{ post.data.description }}</p>
                    </article>
                {% endfor %}
            </div>
        </div>
    </section>
    <aside>
        <p class="center">Like RSS? <a href="https://www.troyv.dev/feed.xml">Subscribe to this feed</a>.</p>
    </aside>
{% endblock %}

<style>
    {% set css %}
    .post-listing {
        align-items: flex-start;
        border: none;
        display: flex;
        flex-direction: column;
        padding-inline-end: 1ex;
        padding-inline-start: 1ex;
    }

    .all-posts h2 {
        font-size: var(--step-2);
    }

    .posts-container {
        grid-template-columns: repeat(auto-fill, minmax(20rem, 1fr));
    }

    {% endset %}
</style>